#include <Wire.h>
#include <Adafruit_GFX.h>
#include <Adafruit_SSD1306.h>

#define SCREEN_WIDTH 128  // OLED display width, in pixels
#define SCREEN_HEIGHT 64  // OLED display height, in pixels

// Declaration for SSD1306 display connected to custom I2C pins
#define OLED_RESET    -1  // Reset pin # (or -1 if sharing Arduino reset pin)
Adafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT, &Wire, OLED_RESET);

// Custom I2C pins
#define I2C_SDA 12  // GPIO12 (D6)
#define I2C_SCL 14  // GPIO14 (D5)

void setup() {
  Serial.begin(115200);

  // Initialize I2C with custom SDA and SCL pins
  Wire.begin(I2C_SDA, I2C_SCL);
  
  // Initialize OLED display with the I2C address (0x3C) and custom I2C pins
  if(!display.begin(SSD1306_SWITCHCAPVCC, 0x3C)) { 
    Serial.println(F("SSD1306 allocation failed"));
    for(;;); // Don't proceed, loop forever
  }
  
  // Clear the buffer
  display.clearDisplay();

  display.clearDisplay();
  display.setTextSize(2);
  display.setTextColor(WHITE);
  display.setCursor(0, 0);
  display.println("HEITOR RS.");
  display.setCursor(0, 20);
  display.setTextSize(1);
  display.println("Teste OLED ESP 2866");
  display.display();  // Show initial message on the 
}

int pos = 0;

void draw(int x, int y) {
  display.setTextSize(1);
  display.setCursor(x-2, y);
    display.print("--");
    display.setCursor(x-2, y);
    display.print("==");
    display.setCursor(x-1, y);
    display.print("=");
    display.setCursor(x-1, y);
    display.print("-");
}

void loop() {
  for (int i=2; i<=118; i++) {
    display.setTextSize(1);
    display.fillRect(i-3, 50, 20, 5, BLACK);
    draw(i, 50);
    display.fillRect(121-i, 40, 20, 5, BLACK);
    draw(118-i, 40);
    display.display();  // Show initial message on the OLED
    delay(10);
  }
  for (int i=118; i>3; i--) {
    display.fillRect(i, 50, 20, 5, BLACK);
    draw(i, 50);
    display.fillRect(115-i, 40, 20, 5, BLACK);
    draw(118-i, 40);
    display.display();  // Show initial message on the OLED
    delay(10);
  }
}
